<!DOCTYPE html>
<html lang="nl">
    
<head>
<meta charset="UTF-8">
<title>Verborgen aanwijzing</title>
    
<style>
body {
    font-family: 'Arial Black', Arial, sans-serif;
    margin: 0;
    height: 100vh;
    background-image: url('Foto%202024.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
}

/* Overlay container voor tekst */
.overlay {
    position: absolute;
    top: 5%;             /* verticale positie vanaf bovenkant */
    left: 50%;            /* horizontaal midden van het scherm */
    transform: translateX(-50%); /* verschuif de div terug zodat hij echt gecentreerd is */
    color: white;
    /* background-color: rgba(255, 0, 0, 0.5); /* halfdoorzichtig rood */
    text-align: center;   /* tekst binnen de overlay gecentreerd */
    text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
    width: 75%;
    max-width: 100%;        /* voorkomt dat tekst te breed wordt */
}

/* Titel */
h1 {
    font-size: 4em;
    margin-bottom: 0.5em;
}

/* Countdown */
#count {
    font-size: 4.5em;
    font-weight: bold;
    letter-spacing: 0.05em;
    animation: pulse 1s infinite alternate;
}

/* Pulse animatie */
@keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.05); }
}

/* Bericht */
#message {
    margin-top: 15px;
    font-size: 2.5em;
    text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
    max-width: 100%;          /* tekst mag maximaal 80% van overlay zijn */
    word-wrap: break-word;   /* lange woorden breken indien nodig */
    text-align: center;      /* tekst gecentreerd */
    line-height: 1.4em;      /* iets meer ruimte tussen regels voor leesbaarheid */
}

/* Media queries voor kleinere schermen */
@media (max-width: 768px) { /* tablets */
    h1 { font-size: 2.8em; }
    #count { font-size: 3em; }
    #message { font-size: 2em; }
}

@media (max-width: 480px) { /* smartphones */
    .overlay { top: 5%; left: 5%; }
    h1 { font-size: 2em; }
    #count { font-size: 2.3em; }
    #message { font-size: 1.5em; }
}
</style>
       
</head>
    
<body>
  <div class="overlay">
    <h1>Verborgen aanwijzing</h1>
    <div id="count">-- : -- : --</div>
    <div id="message">
      Jullie zijn te vroeg, er wordt nog volop gezocht op deze plaats door de politie. Kom terug wanneer de politie deze zone vrijgegeven heeft!
    </div>
  </div>

    <div id="warning" style="display:none; color:orange; text-align:center; font-size:1.2em;"></div>


<script>
const targetISO = '2025-10-29T22:30:00+01:00'; // Doelmoment (Europe/Brussels)
const redirectURL = 'https://bbfl.formaloo.co/bbfl_aanwijzing';

// Primaire en backup tijdbronnen
const timeApis = [
  'https://worldtimeapi.org/api/timezone/Europe/Brussels',
  'https://timeapi.io/api/Time/current/zone?timeZone=Europe/Brussels'
];

const countdownEl = document.getElementById('count');
let targetMs = new Date(targetISO).getTime();

// Variabelen om servertijd te berekenen
let serverTimeAtFetchMs = null;
let perfNowAtFetch = null;

async function fetchServerTime() {
  for (const url of timeApis) {
    try {
      console.log('‚è≥ Probeer tijdbron:', url);
      const resp = await fetch(url + '?_=' + Date.now(), { cache: 'no-store' });
      if (!resp.ok) throw new Error('Geen 200');
      const data = await resp.json();

      // Ondersteuning voor beide API-formaten
      const timeStr = data.datetime || data.dateTime;
      if (!timeStr) throw new Error('Geen geldige tijd gevonden');

      const serverDate = new Date(timeStr);
      console.log('‚úÖ Servertijd ontvangen:', serverDate.toISOString());
      return serverDate.getTime();
    } catch (err) {
      console.warn('‚ö†Ô∏è Tijdbron faalde:', url, err);
    }
  }
  throw new Error('Geen enkele tijdbron werkte');
}

async function init() {
  try {
    const serverMs = await fetchServerTime();
    serverTimeAtFetchMs = serverMs;
    perfNowAtFetch = performance.now();

    startTicker();
  } catch (err) {
    console.error('‚ùå Geen servertijd beschikbaar:', err);
    countdownEl.textContent = 'Kon servertijd niet ophalen.';
  }
}

function msToDHMS(ms) {
  if (ms < 0) ms = 0;
  const totalSeconds = Math.floor(ms / 1000);
  const days = Math.floor(totalSeconds / 86400);
  const hours = Math.floor((totalSeconds % 86400) / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);
  const seconds = totalSeconds % 60;
  return { days, hours, minutes, seconds };
}

function two(n) {
  return n.toString().padStart(2, '0');
}

function updateAndMaybeRedirect() {
  if (!serverTimeAtFetchMs) return;

  const nowPerf = performance.now();
  const estimatedServerMs = serverTimeAtFetchMs + (nowPerf - perfNowAtFetch);
  const diffMs = targetMs - estimatedServerMs;

  if (diffMs <= 0) {
    countdownEl.textContent = 'Redirecten...';
    setTimeout(() => (window.location.href = redirectURL), 300);
    return;
  }

  const { days, hours, minutes, seconds } = msToDHMS(diffMs);
  let parts = [];
  if (days > 0) parts.push(`${days}d`);
  parts.push(`${hours}u`);
  parts.push(`${two(minutes)}m`);
  parts.push(`${two(seconds)}s`);

  countdownEl.innerHTML = `Aftellen: ${parts.join(' ')}`;
}

function startTicker() {
  updateAndMaybeRedirect();
  setInterval(updateAndMaybeRedirect, 1000);

  // Her-synchroniseer elke 5 minuten
  setInterval(async () => {
    try {
      const serverMs = await fetchServerTime();
      serverTimeAtFetchMs = serverMs;
      perfNowAtFetch = performance.now();
      console.log('üîÑ Servertijd opnieuw gesynchroniseerd');
    } catch (err) {
      console.warn('Her-sync mislukt:', err);
    }
  }, 5 * 60 * 1000);
}

init();
</script>

</body>

































